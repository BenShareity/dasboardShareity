import{a as r,Q as A,x as E,o as l,c as O,w as T,g as e,b as n,e as c,f as a,F,A as N,t as p,q as P,B as G,n as m,h as Q}from"./index.8eef5a34.js";import{_ as W}from"./steve_buy_usd.7c238cc4.js";import{_ as J}from"./NavBar.1d7fa6fb.js";import{_ as K,U as X}from"./LayoutAuthenticated.ccaeb884.js";import{M as Y,ac as H,ad as V,ae as Z,af as ee}from"./ServerCall.bf212017.js";import{_ as h}from"./BaseIcon.86eb869a.js";import{L as $}from"./LoadingSpinner.708020bb.js";import{u as se}from"./socket.0643ffd4.js";import{_ as te}from"./BaseButton.060f3a5f.js";import"./alerts.ef7819ba.js";import"./session.f47d2680.js";import"./LoginController.5d91ed5e.js";import"./_plugin-vue_export-helper.cdc0426e.js";const le={class:"h-[89vh]"},oe={class:"flex gap-2 items-center mb-[10px]"},ae=e("p",{class:"font-semibold text-[23px]"},"Chat Steve",-1),ne={key:0,class:"w-full h-full justify-center items-center flex"},ie={key:1,class:"flex h-full w-full shadow-xl"},ce={class:"w-[50%] flex flex-col h-full shadow-[1px_1px_10px_1px_#8080801a;]"},de={class:"h-[100px]"},ue={class:"h-full p-3"},re={class:"flex items-center justify-between"},pe=e("div",{class:"flex items-center gap-4"},[e("div",{class:"w-[70px] h-[70px]"},[e("img",{class:"w-full h-full object-contain rounded-full shadow-lg",src:W})]),e("div",null,[e("span",{class:"text-[21px]"},"Steve"),e("p",{class:"text-[14px]"},"Hi!, I'am Steve")])],-1),he={class:"h-full w-full p-[15px] flex items-center overflow-hidden"},fe={class:"w-full h-full shadow-[1px_1px_10px_1px_#80808036] rounded-[38px]"},_e={class:"h-full w-full p-[10px] overflow-hidden"},xe={class:"w-full relative p-[13px]"},ve={class:"flex items-center justify-center"},me=e("input",{type:"text",placeholder:"Send Message...",class:"w-full pl-4 rounded-[20px] shadow-lg text-base p-4 bg-gray-400/10"},null,-1),ge={class:"flex flex-col w-full h-full overflow-auto"},we=["onClick"],ye={class:"flex gap-2 items-center"},be={class:"w-[59px] h-[59px]"},Ce=["src"],ke=["onChange"],Se={key:0,class:"w-full h-full justify-center items-center flex"},je={key:1,class:"w-full h-full"},Me={key:0,class:"w-full h-full flex flex-col"},Ie={class:"h-[94px] p-[10px] shadow-[1px_1px_10px_1px_#80808012] w-full"},ze={class:"h-full"},Te={class:"flex items-center justify-between"},Fe={class:"flex items-center gap-4"},Ne={class:"w-[70px] h-[70px]"},He=["src"],Ve={class:"text-[21px]"},$e={class:"text-[14px]"},Be={class:"flex"},De={class:"w-full h-full overflow-hidden"},Ue={class:"h-full p-4 overflow-auto scrolling"},Le={class:"text-[#2a2a2bde]"},Re={class:"w-full p-5 rounded-bl-3xl rounded-br-3xl"},qe={class:"relative"},Ae={class:"flex justify-center items-center"},Ee={key:1,class:"w-full h-full justify-center items-center flex flex-col text-2xl text-gray-400"},Oe=e("p",null,"Hello Steve!",-1),Pe=e("p",null,"Welcome to your Chats, select one of them to start chatting",-1),Ge=[Oe,Pe],is={__name:"ChatSteveView",setup(Qe){const B=r({}),v=r(1),y="https://chgsdev.shareity.com/",i=r(null),o=r({}),g=r(!1),w=r(!1),f=r(""),_=se();A(async()=>{B.value=await X.getMyProfile()}),E(async()=>{w.value=!0,await _.socketGet(),L(),_.socket.on("connect",()=>{console.log("Sokect chat")}),_.socket.on("newMessageResived",s=>{b(),o.value[s.userFrom.id].chatMessages.push(s)})});const D=s=>{s.preventDefault(),encodeURIComponent(f.value);let u={idFrom:v.value,idTo:i.value.id,message:f.value};_.socket.emit("createMessage",u,d=>{f.value="";let x=document.querySelector(".scrolling");o.value[d.userTo.id].chatMessages.push(d),setTimeout(()=>{x.scrollTop=x.scrollHeight},5),console.log(d)})},U=s=>{g.value=!0,s.chatMessages.map(u=>{const d=decodeURIComponent(u.message);u.message=d}),setTimeout(()=>{i.value=s,b(),g.value=!1},1200)},b=()=>{setTimeout(()=>{const s=document.querySelector(".scrolling");s.scrollTop=s.scrollHeight},5)},L=()=>{_.socket.emit("findMessagesforSteve",s=>{o.value=s,console.log(s),w.value=!1})};return(s,u)=>(l(),O(K,null,{default:T(()=>[e("div",le,[n(J,{class:"h-full !ml-10 !mr-[70px] !max-w-full"},{default:T(()=>{var d,x,C,k,S;return[e("div",oe,[n(te,{to:"/dashboard",icon:c(Y),color:"info","rounded-full":"",small:""},null,8,["icon"]),ae]),w.value?(l(),a("div",ne,[n($)])):(l(),a("div",ie,[e("div",ce,[e("div",de,[e("div",ue,[e("div",re,[pe,n(h,{path:c(H),w:"w-10",h:"h-10",class:"sizeIconClip text-[#8080806e]"},null,8,["path"])])])]),e("div",he,[e("div",fe,[e("div",_e,[e("div",xe,[e("div",ve,[me,n(h,{path:c(V),w:"w-10",h:"h-10",class:"absolute right-[17px] sizeIconSearch text-[#8080806e]"},null,8,["path"])])]),e("div",ge,[(l(!0),a(F,null,N(Object.keys(o.value),(t,R)=>{var j,M,I,z;return l(),a("div",{class:m(["p-2 pt-[13px] pb-[12px]",((j=o.value[t])==null?void 0:j.id)===((M=i.value)==null?void 0:M.id)?"bg-[#5f5b5b0d] rounded-[9px]":""]),key:R},[e("div",{class:"flex items-center justify-between",onClick:q=>U(o.value[t])},[e("div",ye,[e("div",be,[e("img",{class:"w-full h-full object-contain rounded-full shadow-lg",src:((I=o.value[t])==null?void 0:I.imagen)===null?"../../assets/img/png/steve_buy_usd.png":c(y)+((z=o.value[t])==null?void 0:z.imagen)},null,8,Ce)]),e("span",null,p(o.value[t].firstName),1),e("span",null,p(o.value[t].lastName),1)]),s.countMessageUserread?(l(),a("span",{key:0,class:"rounded-full w-[28px] h-[28px] p-[3px] shadow-xl text-center bg-blue-500 text-[15px] font-semibold text-white",onChange:q=>s.read(o.value[t].id)},p(s.countMessageUserResived),41,ke)):Q("",!0)],8,we)],2)}),128))])])])])]),g.value?(l(),a("div",Se,[n($)])):(l(),a("div",je,[i.value?(l(),a("div",Me,[e("div",Ie,[e("div",ze,[e("div",Te,[e("div",Fe,[e("div",Ne,[e("img",{class:"w-full h-full object-contain rounded-full shadow-lg",src:(d=i.value)!=null&&d.imagen?c(y)+((x=i.value)==null?void 0:x.imagen):"../../assets/img/png/steve_buy_usd.png"},null,8,He)]),e("div",null,[e("span",Ve,p((C=i.value)==null?void 0:C.firstName),1),e("p",$e," Hi!, I'am "+p((k=i.value)==null?void 0:k.firstName),1)])]),e("div",Be,[n(h,{path:c(V),w:"w-10",h:"h-10",class:"sizeIconClip text-[#8080806e]"},null,8,["path"]),n(h,{path:c(H),w:"w-10",h:"h-10",class:"sizeIconClip text-[#8080806e]"},null,8,["path"])])])])]),e("div",De,[e("div",Ue,[(l(!0),a(F,null,N((S=i.value)==null?void 0:S.chatMessages,t=>(l(),a("div",{class:m(["w-full mt-2",t.userFrom.id===v.value?"   flex justify-end":"  flex justify-start"])},[e("div",{class:m(["w-[410px] flex",t.userFrom.id===v.value?" justify-end":"justify-start"])},[e("div",{class:m(["rounded-[20px] p-[15px] pr-[25px] w-fit",t.userFrom.id===v.value?"   bg-blue-400/80 rounded-br":"  bg-gray-200/50 rounded-bl"])},[e("p",Le,p(t.message),1)],2)],2)],2))),256))])]),e("form",{onSubmit:D},[e("div",Re,[e("div",qe,[e("div",Ae,[n(h,{path:c(Z),w:"w-10",h:"h-10",class:"absolute left-[6px] sizeIconClip text-[#8080806e] cursor-pointer"},null,8,["path"]),P(e("input",{type:"text",placeholder:"Send Message...",class:"w-full p-[15px] pl-[43px] pr-[56px] rounded-[20px] shadow-lg text-base","onUpdate:modelValue":u[0]||(u[0]=t=>f.value=t)},null,512),[[G,f.value]]),n(h,{path:c(ee),w:"w-10",h:"h-10",class:"absolute right-[12px] sizeIcon text-[#2563eb] cursor-pointer"},null,8,["path"])])])])],32)])):(l(),a("div",Ee,Ge))]))]))]}),_:1})])]),_:1}))}};export{is as default};
