import{k as M,o as d,f as w,l as N,n as c,e as i,j as L,a as C,c as _,w as f,h as S,g as h,t as Y,p as J,R as W,F as T,A as X,u as V,x as Z,M as x,d as F,b as l,K as E,T as O,q as ee,O as te,P as se,s as ae}from"./index.8eef5a34.js";import{c as H,k as oe,l as ne,n as re,o as U,p as le,q as ie,r as ce,s as q,t as ue,v as de,w as me,x as pe,y as ge,z as ve,A as ye,B as fe,C as he,D as ke,E as be,F as P,G as we,S as r,H as Ce,I as xe,J as _e,u as Ae,K as Le,L as Se}from"./ServerCall.bf212017.js";import{d as Me,_ as I}from"./BaseIcon.86eb869a.js";import{a as $e}from"./NavBar.1d7fa6fb.js";import{u as De}from"./session.f47d2680.js";import{L as Be}from"./LoginController.5d91ed5e.js";const Ie={profile:{to:"/profile",label:"Profile",icon:H},dashboard:{to:"/dashboard",label:"Dashboard",icon:oe},users:{to:"/users",label:"All Users",icon:ne},campaigns:{to:"/campaigns",label:"Campaigns",icon:re},sponsors:{to:"/sponsors",label:"Sponsors",icon:U},agencies:{to:"/agencies",label:"Agencies",icon:U},causes:{to:"/causes",label:"Causes",icon:le},"rewards-messages":{to:"/rewards-messages",label:"Rewards & Messages",icon:ie},"community-message":{to:"/community-message",label:"Community Message",icon:ce},credits:{to:"/credits",label:"Credits",icon:q},pledges:{to:"/pledges",label:"Pledges",icon:ue},"phone-campaigns":{to:"/phone-campaigns",label:"Campaing's Phone Number",icon:de},faq:{to:"/faq",label:"FaQ",icon:me},"chat-steve":{to:"/chat-steve",label:"Steve",icon:pe},"users-credits":{to:"/users-credits",label:"User's Credits",icon:q},friends:{to:"/friends",label:"Friends",icon:ge}},ze=[{icon:ve,label:"Sample menu",menu:[{icon:ye,label:"Item One"},{icon:fe,label:"Item Two"},{isDivider:!0},{icon:he,label:"Item Last"}]},{isCurrentUser:!0,menu:[{icon:H,label:"My Profile",to:"/profile"},{icon:ke,label:"Settings"},{icon:be,label:"Messages"},{isDivider:!0},{icon:P,label:"Log Out",isLogout:!0}]},{icon:we,label:"Light/Dark",isDesktopNoLabel:!0,isToggleLightDark:!0},{icon:P,label:"Log out",isDesktopNoLabel:!0,isLogout:!0}],Ee={getAll:async()=>{try{return(await r.get("/dashboard/users")).data}catch(e){throw console.log(e),e}},getMyProfile:async()=>{try{return(await r.get("/auth/profile")).data}catch(e){throw console.log(e),e}},getSwayScore:async e=>{try{return(await r.get(`/user/sway-score/${e}`)).data}catch{}},delete:async e=>{try{return(await r.delete(`/user/${e}`)).data}catch{}},userAction:async e=>{try{return(await r.get(`/user/get-by-nickname/${e}`)).data}catch(t){console.log(t)}},getUserName:async e=>{console.log("user",e);try{const t=await r.get(`/user/get-by-username/${e}`);return console.log(t.data),t.data}catch(t){console.log(t)}},getCredit:async e=>{try{const t=await r.get(`/user/credit/${e}`);return console.log("desde el controlador",t.data),t.data}catch(t){console.log(t)}},getCreditHistory:async(e,t)=>{try{const s=await r.post("/user/get/history",{page:1,items:t,idUser:e});return console.log("Desde el controlador",s.data),s.data}catch(s){console.log(s)}},addCredits:async(e,t,s)=>{try{return console.log("si llega?",e,t,s),(await r.post("/user/credit/execute",{amount:s,id:e,type:"credit",transaction:t,method_payment:"credit"})).data}catch(o){console.log(o)}},blockUser:async(e,t)=>{try{return(await r.get(`/user/block/${e}/${t?1:0}`)).data}catch(s){console.log(s)}},blockUserChallenge:async(e,t)=>{try{return(await r.post("/user-challenge/set-status",{id:e,status:t})).data}catch(s){console.log(s)}},adminApprove:async()=>{try{const e=await r.get("/user/admin/approve/sc");return console.log(e.data),e.data}catch(e){throw e}}},Pe={__name:"NavBarItemPlain",props:{display:{type:String,default:"flex"},useMargin:Boolean},setup(e){const t=M();return(s,o)=>(d(),w("div",{class:c([[e.display,i(t).navBarItemLabelStyle,i(t).navBarItemLabelHoverStyle,e.useMargin?"my-2 mx-3":"py-2 px-3"],"items-center cursor-pointer dark:text-white dark:hover:text-slate-400"])},[N(s.$slots,"default")],2))}},Ne={key:0},j={__name:"AsideMenuItem",props:{item:{type:Object,required:!0},isDropdownList:Boolean},emits:["menu-click"],setup(e,{emit:t}){De().getUserRole();const o=e,m=t,a=M(),n=L(()=>o.item&&o.item.color),p=L(()=>n.value?"":a.asideMenuItemActiveStyle),v=C(!1),u=L(()=>{var g;return[o.isDropdownList?"py-3 px-6 text-sm":"py-3",n.value?Me((g=o.item)==null?void 0:g.color,!1,!0):`${a.asideMenuItemStyle} dark:text-slate-300 dark:hover:text-white`]}),k=L(()=>{var g;return!!((g=o.item)!=null&&g.menu)}),z=g=>{m("menu-click",g,o.item),k.value&&(v.value=!v.value)};return(g,y)=>{var $,D,A;return o.item?(d(),w("li",Ne,[(d(),_(J(e.item.to?i(W):"a"),{to:($=e.item.to)!=null?$:null,href:(D=e.item.href)!=null?D:null,target:(A=e.item.target)!=null?A:null,class:c(["flex cursor-pointer",u.value]),onClick:z},{default:f(b=>[e.item.icon?(d(),_(I,{key:0,path:e.item.icon,class:c(["flex-none",[b&&b.isExactActive?p.value:""]]),w:"w-16",size:18},null,8,["path","class"])):S("",!0),h("span",{class:c(["grow text-ellipsis line-clamp-1",[{"pr-12":!k.value},b&&b.isExactActive?p.value:""]])},Y(e.item.label),3),k.value?(d(),_(I,{key:1,path:v.value?i(Ce):i(xe),class:c(["flex-none",[b&&b.isExactActive?p.value:""]]),w:"w-12"},null,8,["path","class"])):S("",!0)]),_:1},8,["to","href","target","class"])),k.value?(d(),_(G,{key:0,menu:e.item.menu,class:c([i(a).asideMenuDropdownStyle,v.value?"block dark:bg-slate-800/50":"hidden"]),"is-dropdown-list":""},null,8,["menu","class"])):S("",!0)])):S("",!0)}}},G={__name:"AsideMenuList",props:{isDropdownList:Boolean,menu:{type:Array,required:!0}},emits:["menu-click"],setup(e,{emit:t}){const s=t,o=(m,a)=>{s("menu-click",m,a)};return(m,a)=>(d(),w("ul",null,[(d(!0),w(T,null,X(e.menu,(n,p)=>(d(),_(j,{key:p,item:n,"is-dropdown-list":e.isDropdownList,onMenuClick:o},null,8,["item","is-dropdown-list"]))),128))]))}},Oe={id:"aside",class:"lg:py-2 lg:pl-2 w-60 lg:w-1/5 fixed flex z-40 top-0 h-full transition-position"},Ue={class:"overflow-auto"},qe=h("div",{class:"text-center flex-1 lg:text-left lg:pl-6 xl:text-center xl:pl-0"},[h("h1",{class:"font-black text-3xl"},"SHAREITY")],-1),Re={class:"bottom-0 w-full"},Te={__name:"AsideMenuLayer",props:{menu:{type:Array,required:!0}},emits:["menu-click","aside-lg-close-click"],setup(e,{emit:t}){const s=C({}),o=C(),m=V(),a=t,n=C(!1),p=M();Z(async()=>{s.value=await Ee.getMyProfile(),o.value=s.value.rol});const v=L(()=>({label:"Logout",icon:P,color:"info",role:o.value,isLogout:!0})),u=(g,y)=>{a("menu-click",g,y)},k=g=>{a("aside-lg-close-click",g)};async function z(){await Be.logout(),m.push("/")}return(g,y)=>{const $=x("v-card-title"),D=x("v-spacer"),A=x("v-btn"),b=x("v-card-actions"),K=x("v-card"),Q=x("v-dialog");return d(),w("aside",Oe,[h("div",{class:c([i(p).asideStyle,"lg:rounded-2xl grid place-content-between overflow-hidden dark:bg-slate-900 relative h-full"])},[h("div",Ue,[h("div",{class:c([i(p).asideBrandStyle,"flex flex-row h-14 items-center justify-between dark:bg-slate-900"])},[qe,h("button",{class:"hidden lg:inline-block xl:hidden p-3",onClick:F(k,["prevent"])},[l(I,{path:i(_e)},null,8,["path"])])],2),h("div",{class:c([i(p).darkMode?"aside-scrollbars-[slate]":i(p).asideScrollbarsStyle,"flex-1"])},[l(G,{menu:e.menu,onMenuClick:u},null,8,["menu"])],2)]),h("ul",Re,[l(Q,{modelValue:n.value,"onUpdate:modelValue":y[2]||(y[2]=B=>n.value=B),width:"auto"},{default:f(()=>[l(K,null,{default:f(()=>[l($,{class:"text-h5 ml-2 red-darken-1"},{default:f(()=>[E(" Are you sure you want close session? ")]),_:1}),l(b,null,{default:f(()=>[l(D),l(A,{class:"mr-2",color:"red-darken-1",variant:"text",onClick:y[0]||(y[0]=B=>z())},{default:f(()=>[E(" Yes ")]),_:1}),l(A,{class:"mr-2",color:"green-darken-1",variant:"text",onClick:y[1]||(y[1]=B=>n.value=!1)},{default:f(()=>[E(" No ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(j,{item:v.value,onClick:y[3]||(y[3]=B=>n.value=!0)},null,8,["item"])])],2)])}}},Ve={__name:"OverlayLayer",props:{zIndex:{type:String,default:"z-50"},type:{type:String,default:"flex"}},emits:["overlay-click"],setup(e,{emit:t}){const s=t,o=a=>{s("overlay-click",a)},m=M();return(a,n)=>(d(),w("div",{class:c([[e.type,e.zIndex],"items-center flex-col justify-center overflow-hidden fixed inset-0"])},[l(O,{"enter-active-class":"transition duration-150 ease-in","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:f(()=>[h("div",{class:c(["absolute inset-0 bg-gradient-to-tr opacity-90 dark:from-gray-700 dark:via-gray-900 dark:to-gray-700",i(m).overlayStyle]),onClick:o},null,2)]),_:1}),l(O,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"animate-fade-out"},{default:f(()=>[N(a.$slots,"default")]),_:3})],2))}},Fe={__name:"AsideMenu",props:{menu:{type:Array,required:!0},isAsideMobileExpanded:Boolean,isAsideLgActive:Boolean},emits:["menu-click","aside-lg-close-click"],setup(e,{emit:t}){const s=t,o=(a,n)=>{s("menu-click",a,n)},m=a=>{s("aside-lg-close-click",a)};return(a,n)=>(d(),w(T,null,[l(Te,{menu:e.menu,class:c([e.isAsideMobileExpanded?"left-0":"-left-60 lg:left-0",{"lg:hidden xl:flex":!e.isAsideLgActive}]),onMenuClick:o,onAsideLgCloseClick:m},null,8,["menu","class"]),ee(l(Ve,{"z-index":"z-30",onOverlayClick:m},null,512),[[te,e.isAsideLgActive]])],64))}},He={getRoutes:async()=>{try{return(await r.get("/dashboard/routes")).data}catch(e){throw e}},updateAgency:async e=>{try{const t=await r.post("/dashboard/agency/admin-approve",e);return console.log("updateAgency",t.data),t.data}catch(t){throw t}},updateSponsor:async e=>{try{return console.log("updateSponsor",e),(await r.post("/dashboard/sponsor/admin-approve",e)).data}catch(t){throw t}},updateOrganization:async e=>{try{return console.log("updateOrganization",e),(await r.post("/dashboard/organization/admin-approve",e)).data}catch(t){throw t}},getChartsData:async e=>{try{return(await r.get(`/dashboard/challenge/${e}/stats`)).data}catch(t){throw t}}},R="xl:pl-[20%]",We={__name:"LayoutAuthenticated",setup(e){Ae();const t=["profile","dashboard","users","campaigns","sponsors","causes","agencies","rewards-messages","community-message","credits","pledges","phone-campaigns","faq","chat-steve","friends","users-credits"],s=C(null);se(async()=>{const v=await He.getRoutes();s.value=[];for(let u of t)v.includes(u)&&s.value.push(Ie[u])}),ae().setUser({name:"Shareity Admin",email:"admin@shareity.com",avatar:"https://avatars.dicebear.com/api/avataaars/example.svg?options[top][]=shortHair&options[accessoriesChance]=93"});const o=M(),m=V(),a=C(!1),n=C(!1);m.beforeEach(()=>{a.value=!1,n.value=!1});const p=(v,u)=>{u.isToggleLightDark&&o.setDarkMode(),u.isLogout};return(v,u)=>(d(),w("div",{class:c({dark:i(o).darkMode,"overflow-hidden lg:overflow-visible":a.value})},[h("div",{class:c([[R,{"ml-60 lg:ml-0":a.value}],"pt-14 min-h-screen w-screen transition-position lg:w-auto bg-gray-50 dark:bg-slate-800 dark:text-slate-100"])},[l($e,{menu:i(ze),class:c([R,{"ml-60 lg:ml-0":a.value}]),onMenuClick:p},{default:f(()=>[l(Pe,{display:"flex xl:hidden",onClick:u[0]||(u[0]=F(k=>a.value=!a.value,["prevent"]))},{default:f(()=>[l(I,{path:a.value?i(Le):i(Se),size:"24"},null,8,["path"])]),_:1})]),_:1},8,["menu","class"]),s.value?(d(),_(Fe,{key:0,"is-aside-mobile-expanded":a.value,"is-aside-lg-active":n.value,menu:s.value,onMenuClick:p,onAsideLgCloseClick:u[1]||(u[1]=k=>n.value=!1)},null,8,["is-aside-mobile-expanded","is-aside-lg-active","menu"])):S("",!0),N(v.$slots,"default")],2)],2))}};export{He as D,Ee as U,We as _,Ve as a};
