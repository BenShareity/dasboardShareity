import{M as ie,N as pe,O as _e,P as ve,Q as me,R as fe,T as he}from"./ServerCall.bf212017.js";import{_ as ge}from"./NavBar.1d7fa6fb.js";import{_ as xe}from"./CardBox.b1a10a53.js";import{U as A,_ as ye}from"./LayoutAuthenticated.ccaeb884.js";import{_ as w}from"./BaseButton.060f3a5f.js";import{C as we}from"./ChallengeController.31bb59b5.js";import{U as ke}from"./utilityMethods.d9c941ff.js";import{u as be}from"./session.f47d2680.js";import{_ as Ce}from"./FormField.8a5b2723.js";import{_ as Ue}from"./FormControl.b755056f.js";import{L as Ve}from"./LoadingSpinner.708020bb.js";import{a as c,j as L,r as Be,P as $e,Q as Se,M as _,o as n,c as h,w as a,b as s,g as e,e as i,f as u,h as k,K as r,F as E,A as Q,t as x}from"./index.8eef5a34.js";import"./alerts.ef7819ba.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./BaseIcon.86eb869a.js";import"./LoginController.5d91ed5e.js";const Ae={class:"flex justify-between pb-5"},Le={class:"flex gap-2 items-center"},Ne=e("p",{class:"font-extrabold"},"All Users",-1),Me={key:0,class:"flex align-center justify-center h-screen"},De=e("b",null,"Delete",-1),je=e("b",null,"Block",-1),Ie=e("b",null,"Unblock",-1),Pe={className:"w-100 relative my-0 m-auto"},Oe={key:0,class:"table-auto w-full text-sm text-left text-gray-500 dark:text-gray-400"},Ze=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-3"},"Badge"),e("th",{scope:"col",class:"px-6 py-3"},"Challenge Name"),e("th",{scope:"col",class:"px-6 py-3"},"User Challenge"),e("th",{scope:"col",class:"px-6 py-3"}," Block User Challenge ")])],-1),Te={class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},Fe={class:"px-3 py-4 w-[80px] h-[80px]"},He=["src"],Ee={class:"px-3 py-4 w-[200px] h-[200px]"},Qe={class:"px-3 py-4 w-[80px] h-[80px]"},Re=["src"],Ge=["src"],Ke={class:"px-3 py-4 w-[80px] h-[80px]"},qe={key:1},ze=e("p",null,"No user challenges to show",-1),Je=[ze],We={className:"w-80 relative my-0 m-auto"},Xe={key:0,class:"p-3 bg-gray-100/50 dark:bg-slate-800"},Ye={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},et={key:0,class:"table-auto w-full text-sm text-left text-gray-500 dark:text-gray-400"},tt={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},lt=e("th",{scope:"col",class:"w-12 px-6 py-3"},"Profile Picture",-1),st={scope:"col",class:"px-6 py-3"},ot={class:"flex items-center"},at=e("svg",{class:"w-3 h-3 ml-1.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"})],-1),nt=[at],rt={scope:"col",class:"w-20 px-6 py-3"},ct={class:"flex items-center"},ut=e("svg",{class:"w-3 h-3 ml-1.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"})],-1),dt=[ut],it={scope:"col",class:"w-20 px-6 py-3"},pt={class:"flex items-center"},_t=e("svg",{class:"w-3 h-3 ml-1.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"})],-1),vt=[_t],mt={scope:"col",class:"w-20 px-6 py-3"},ft={class:"flex items-center"},ht=e("svg",{class:"w-3 h-3 ml-1.5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8.574 11.024h6.852a2.075 2.075 0 0 0 1.847-1.086 1.9 1.9 0 0 0-.11-1.986L13.736 2.9a2.122 2.122 0 0 0-3.472 0L6.837 7.952a1.9 1.9 0 0 0-.11 1.986 2.074 2.074 0 0 0 1.847 1.086Zm6.852 1.952H8.574a2.072 2.072 0 0 0-1.847 1.087 1.9 1.9 0 0 0 .11 1.985l3.426 5.05a2.123 2.123 0 0 0 3.472 0l3.427-5.05a1.9 1.9 0 0 0 .11-1.985 2.074 2.074 0 0 0-1.846-1.087Z"})],-1),gt=[ht],xt=e("th",{scope:"col",class:"w-12 px-6 py-3"},[e("div",{class:"flex items-center"},"Challenges Completed")],-1),yt=e("th",{scope:"col",class:"w-20 px-6 py-3"},[e("span",{class:"text-center"},"Sway Score")],-1),wt=e("th",{scope:"col",class:"col-auto px-6 py-3"},[e("span",{class:"text-center"},"Actions")],-1),kt={key:1,scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},bt=["src"],Ct={key:2,scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Ut=["src"],Vt={class:"px-6 py-4"},Bt={class:"px-6 py-4"},$t={class:"px-6 py-4"},St={class:"px-6 py-4"},At={class:"px-6 py-4"},Lt={class:"px-6 py-4 text-right flex row"},Nt={class:"before:hidden lg:w-1 whitespace-nowrap"},Mt={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Dt=e("p",{class:"text-lg italic font-bold"},[r("User has been "),e("b",null,"Deleted")],-1),J=!1,jt="default/user_default.png",Yt={__name:"AllUsersView",setup(It){const N=c(Boolean),M=c([]),b="https://chgsdev.shareity.com/",g=c({}),F=c(""),D=c({}),j=c(!1),R=c(0),C=c(!1),U=c(10),V=c(1),G=c([]),B=c({field:"firstName",order:1}),$=c(!1),I=c(!1),S=c(!1),y=c({}),H=c({});be(),L(()=>{const o=V.value*U.value;return q.value.reverse().slice(o,o+U.value)});const W=Be(o=>{switch(o){case 0:return"Inactive";case 1:return"Active";case 2:return"Deleted";default:return o}}),K=L(()=>M.value.filter(o=>o.firstName.includes(F.value))),q=L(()=>{const{field:o,order:t}=B.value,d=(V.value-1)*U.value;return K.value.sort((p,v)=>o==="createdAt"?t*(new Date(p[o])-new Date(v[o])):t*(p[o]<v[o]?1:-1)).slice(d,d+U.value)}),X=L(()=>Math.ceil(K.value.length/U.value)),Y=L(()=>{const o=[];for(let t=0;t<X.value;t++)o.push(t);return o});$e(async()=>{H.value=await A.getMyProfile(),N.value=!0}),Se(()=>{let o=H.value.id;A.getAll(o).then(t=>{M.value=t,N.value=!1})});function P(o){B.value.field===o?(console.log("campo",o),B.value.order*=-1):(B.value.field=o,B.value.order=1)}function ee(o){we.getUserChallenge(o.id).then(t=>{g.value=t.data.page,console.log(g)}),$.value=!0}function te(o){A.getSwayScore(o.id).then(t=>{D.value=t.value,console.log(D)}),I.value=!0,console.log(D)}function le(){V.value=1}function se(){console.log("deleted",R.value),C.value=!1,j.value=!0}async function oe(){const o=y.value.id,t=!y.value.status==1,d=await A.blockUser(o,t),p=M.value.indexOf(y.value);M.value[p].status=d.status,S.value=!1}async function ae(){for(let o=0;o<g.value.length;o++){const t=g.value[o],d=t.id,p=!t.status==1,v=await A.blockUserChallenge(d,p),m=g.value.indexOf(t);t[m].status=v.status}$.value=!1}async function ne(o){const t=[".GIF",".MP4",".MOV"],d="."+o.split(".").pop();return!(t.indexOf(d.toUpperCase())<0)}return(o,t)=>{const d=_("v-card-title"),p=_("v-card-text"),v=_("v-spacer"),m=_("v-btn"),O=_("v-card-actions"),Z=_("v-card"),T=_("v-dialog"),z=_("TableCheckboxCell"),re=_("BaseButtons"),ce=_("v-pagination"),ue=_("BaseLevel"),de=_("v-snackbar");return n(),h(ye,null,{default:a(()=>[s(ge,null,{default:a(()=>[e("div",Ae,[e("div",Le,[s(w,{to:"/dashboard",icon:i(ie),color:"info","rounded-full":"",small:""},null,8,["icon"]),Ne,s(Ce,null,{default:a(()=>[s(Ue,{onInput:t[0]||(t[0]=l=>le()),modelValue:F.value,"onUpdate:modelValue":t[1]||(t[1]=l=>F.value=l),icon:o.mdiAccountBox,value:"Search"},null,8,["modelValue","icon"])]),_:1})])]),N.value?(n(),u("div",Me,[s(Ve)])):k("",!0),s(xe,{class:"mb-6 m","has-table":""},{default:a(()=>[e("div",null,[s(T,{modelValue:C.value,"onUpdate:modelValue":t[4]||(t[4]=l=>C.value=l),width:"auto"},{default:a(()=>[s(Z,null,{default:a(()=>[s(d,{class:"text-h5"},{default:a(()=>[r(" Delete ")]),_:1}),s(p,null,{default:a(()=>[r("Are you sure you want to "),De,r(" this user?")]),_:1}),s(O,null,{default:a(()=>[s(v),s(m,{color:"red",variant:"text",onClick:t[2]||(t[2]=l=>C.value=!1)},{default:a(()=>[r(" Cancel ")]),_:1}),s(m,{color:"green-darken-1",variant:"text",onClick:t[3]||(t[3]=l=>se())},{default:a(()=>[r(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(T,{modelValue:S.value,"onUpdate:modelValue":t[7]||(t[7]=l=>S.value=l),width:"auto"},{default:a(()=>[s(Z,null,{default:a(()=>[y.value.status?(n(),h(d,{key:0,class:"text-h5"},{default:a(()=>[r(" Block User ")]),_:1})):(n(),h(d,{key:1,class:"text-h5"},{default:a(()=>[r(" Unblock User ")]),_:1})),y.value.status?(n(),h(p,{key:2},{default:a(()=>[r("Are you sure you want to "),je,r(" this user?")]),_:1})):(n(),h(p,{key:3},{default:a(()=>[r("Are you sure you want to "),Ie,r(" this user?")]),_:1})),s(O,null,{default:a(()=>[s(v),s(m,{color:"red",variant:"text",onClick:t[5]||(t[5]=l=>S.value=!1)},{default:a(()=>[r(" Cancel ")]),_:1}),s(m,{color:"green-darken-1",variant:"text",onClick:t[6]||(t[6]=l=>oe())},{default:a(()=>[r(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(T,{modelValue:$.value,"onUpdate:modelValue":t[11]||(t[11]=l=>$.value=l),class:"w-[600px] h-[900px]"},{default:a(()=>[s(Z,null,{default:a(()=>[s(d,{class:"text-h5 ml-2"},{default:a(()=>[r(" Detail ")]),_:1}),s(p,null,{default:a(()=>[e("div",Pe,[g.value.length>0?(n(),u("table",Oe,[Ze,e("tbody",null,[(n(!0),u(E,null,Q(g.value,l=>(n(),u("tr",Te,[J?(n(),h(z,{key:0,onChecked:t[8]||(t[8]=f=>o.checked(f,o.client))})):k("",!0),e("td",Fe,[e("img",{class:"w-full object-cover",src:i(b)+l.challenge.badge,alt:"Badge of challenge"},null,8,He)]),e("td",Ee,x(l.challenge.name),1),e("td",Qe,[ne(l.url)?(n(),u("video",{key:1,class:"w-full object-coverrounded-lg shadow-2xl object-center",src:i(b)+l.url,style:{"max-width":"300px"},autoplay:"",loop:"",controls:""},null,8,Ge)):(n(),u("img",{key:0,class:"w-full object-cover",src:i(b)+l.challenge.badge,alt:"Badge of challenge"},null,8,Re))]),e("td",Ke,[s(w,{class:"ml-5",color:l.status==1?"success":"bg-gray-300",icon:l.status==1?i(pe):o.mdiClose,small:"",onClick:t[9]||(t[9]=f=>ae())},null,8,["color","icon"])])]))),256))])])):(n(),u("div",qe,Je))])]),_:1}),s(O,null,{default:a(()=>[s(v),s(m,{class:"mr-2",color:"red-darken-1",variant:"text",onClick:t[10]||(t[10]=l=>$.value=!1)},{default:a(()=>[r(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(T,{modelValue:I.value,"onUpdate:modelValue":t[13]||(t[13]=l=>I.value=l),width:"auto"},{default:a(()=>[s(Z,null,{default:a(()=>[s(d,{class:"text-h5 ml-2"},{default:a(()=>[r(" Sway Score")]),_:1}),s(p,null,{default:a(()=>[e("div",We,[e("p",null,"Sway Score: "+x(D.value),1)])]),_:1}),s(O,null,{default:a(()=>[s(v),s(m,{class:"mr-2",color:"red-darken-1",variant:"text",onClick:t[12]||(t[12]=l=>I.value=!1)},{default:a(()=>[r(" Close ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),G.value.length?(n(),u("div",Xe,[(n(!0),u(E,null,Q(G.value,l=>(n(),u("span",{key:l.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},x(l.name),1))),128))])):k("",!0),e("div",Ye,[N.value?k("",!0):(n(),u("table",et,[e("thead",tt,[e("tr",null,[lt,e("th",st,[e("div",ot,[r(" Name "),e("a",{onClick:t[14]||(t[14]=l=>P("firstName"))},nt)])]),e("th",rt,[e("div",ct,[r(" Status "),e("a",{onClick:t[15]||(t[15]=l=>P("status"))},dt)])]),e("th",it,[e("div",pt,[r(" Sway score "),e("a",{onClick:t[16]||(t[16]=l=>P("sway"))},vt)])]),e("th",mt,[e("div",ft,[r(" Registered "),e("a",{onClick:t[17]||(t[17]=l=>P("createdAt"))},gt)])]),xt,yt,wt])]),e("tbody",null,[(n(!0),u(E,null,Q(q.value,l=>(n(),u("tr",{key:l.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[J?(n(),h(z,{key:0,onChecked:f=>o.checked(f,l)},null,8,["onChecked"])):k("",!0),l.image&&l.imagen.match(/.*\..{2,5}/)?(n(),u("th",kt,[e("img",{class:"rounded-full",src:i(b)+l.imagen,alt:""},null,8,bt)])):(n(),u("th",Ct,[e("img",{src:i(b)+jt,alt:""},null,8,Ut)])),e("td",Vt,x(`${l.firstName} ${l.lastName||""}`),1),e("td",Bt,x(W(l.status)),1),e("td",$t,x(l.sway),1),e("td",St,x(i(ke).formatDate(l.createdAt)),1),e("td",At,[s(w,{color:"info",icon:i(_e),small:"",onClick:f=>ee(l),class:"m-2"},null,8,["icon","onClick"])]),e("td",Lt,[s(w,{color:"info",icon:i(ve),small:"",onClick:f=>te(l),class:"m-2 via-violet-500"},null,8,["icon","onClick"])]),e("td",Nt,[s(re,{type:"justify-start lg:justify-end","no-wrap":""},{default:a(()=>[H.value.rol==="admin"?(n(),h(w,{key:0,color:"danger",icon:i(me),small:"",onClick:f=>{C.value=!0,R.value=l.id}},null,8,["icon","onClick"])):k("",!0),s(w,{class:"ml-5",color:l.status==1?"success":"bg-gray-300",icon:l.status==1?i(fe):i(he),small:"",onClick:f=>{S.value=!0,y.value=l}},null,8,["color","icon","onClick"])]),_:2},1024)])]))),128))])]))]),e("div",Mt,[s(ue,null,{default:a(()=>[s(ce,{length:Y.value.length,color:"black","total-visible":10,modelValue:V.value,"onUpdate:modelValue":t[18]||(t[18]=l=>V.value=l)},null,8,["length","modelValue"])]),_:1})])])]),_:1})]),_:1}),s(de,{modelValue:j.value,"onUpdate:modelValue":t[20]||(t[20]=l=>j.value=l),timeout:3e3,color:"red"},{actions:a(()=>[s(m,{color:"white",variant:"text",onClick:t[19]||(t[19]=l=>j.value=!1)},{default:a(()=>[r(" Close ")]),_:1})]),default:a(()=>[Dt]),_:1},8,["modelValue"])]),_:1})}}};export{Yt as default};
