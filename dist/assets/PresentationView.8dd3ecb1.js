import{a5 as re,a6 as ie}from"./ServerCall.bf212017.js";import{_ as J}from"./CardBox.b1a10a53.js";import{a as ue}from"./BaseIcon.86eb869a.js";import{k as de,a as u,M as G,o as v,f as N,b,w as d,g as t,K as le,n as Q,l as ce,e as r,H as pe,j as me,x as fe,I as ve,c as F,t as j,h as X,A as Y,F as Z,S as ye,U as _e}from"./index.8eef5a34.js";import{a as he,_ as ee}from"./NavBar.1d7fa6fb.js";import{C as te}from"./ChallengeController.31bb59b5.js";import{g as H,S as ae,a as se}from"./swiper.9e38f19b.js";import{_ as ge}from"./BaseButton.060f3a5f.js";import{_ as xe}from"./_plugin-vue_export-helper.cdc0426e.js";import"./alerts.ef7819ba.js";import"./session.f47d2680.js";function be(T){let{swiper:e,extendParams:L,on:c,emit:o,params:y}=T;e.autoplay={running:!1,paused:!1,timeLeft:0},L({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let n,h,$=y&&y.autoplay?y.autoplay.delay:3e3,w=y&&y.autoplay?y.autoplay.delay:3e3,i,S=new Date().getTime(),g,E,C,M,m,_,P;function R(l){!e||e.destroyed||!e.wrapperEl||l.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",R),!P&&a())}const V=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?g=!0:g&&(w=i,g=!1);const l=e.autoplay.paused?i:S+w-new Date().getTime();e.autoplay.timeLeft=l,o("autoplayTimeLeft",l,l/$),h=requestAnimationFrame(()=>{V()})},q=()=>{let l;return e.virtual&&e.params.virtual.enabled?l=e.slides.filter(f=>f.classList.contains("swiper-slide-active"))[0]:l=e.slides[e.activeIndex],l?parseInt(l.getAttribute("data-swiper-autoplay"),10):void 0},k=l=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(h),V();let x=typeof l>"u"?e.params.autoplay.delay:l;$=e.params.autoplay.delay,w=e.params.autoplay.delay;const f=q();!Number.isNaN(f)&&f>0&&typeof l>"u"&&(x=f,$=f,w=f),i=x;const U=e.params.speed,W=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(U,!0,!0),o("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,U,!0,!0),o("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(U,!0,!0),o("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,U,!0,!0),o("autoplay")),e.params.cssMode&&(S=new Date().getTime(),requestAnimationFrame(()=>{k()})))};return x>0?(clearTimeout(n),n=setTimeout(()=>{W()},x)):requestAnimationFrame(()=>{W()}),x},A=()=>{S=new Date().getTime(),e.autoplay.running=!0,k(),o("autoplayStart")},I=()=>{e.autoplay.running=!1,clearTimeout(n),cancelAnimationFrame(h),o("autoplayStop")},s=(l,x)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(n),l||(_=!0);const f=()=>{o("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",R):a()};if(e.autoplay.paused=!0,x){m&&(i=e.params.autoplay.delay),m=!1,f();return}i=(i||e.params.autoplay.delay)-(new Date().getTime()-S),!(e.isEnd&&i<0&&!e.params.loop)&&(i<0&&(i=0),f())},a=()=>{e.isEnd&&i<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(S=new Date().getTime(),_?(_=!1,k(i)):k(),e.autoplay.paused=!1,o("autoplayResume"))},D=()=>{if(e.destroyed||!e.autoplay.running)return;const l=H();l.visibilityState==="hidden"&&(_=!0,s(!0)),l.visibilityState==="visible"&&a()},B=l=>{l.pointerType==="mouse"&&(_=!0,P=!0,!(e.animating||e.autoplay.paused)&&s(!0))},p=l=>{l.pointerType==="mouse"&&(P=!1,e.autoplay.paused&&a())},O=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",B),e.el.addEventListener("pointerleave",p))},z=()=>{e.el.removeEventListener("pointerenter",B),e.el.removeEventListener("pointerleave",p)},oe=()=>{H().addEventListener("visibilitychange",D)},ne=()=>{H().removeEventListener("visibilitychange",D)};c("init",()=>{e.params.autoplay.enabled&&(O(),oe(),A())}),c("destroy",()=>{z(),ne(),e.autoplay.running&&I()}),c("_freeModeStaticRelease",()=>{(C||_)&&a()}),c("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?I():s(!0,!0)}),c("beforeTransitionStart",(l,x,f)=>{e.destroyed||!e.autoplay.running||(f||!e.params.autoplay.disableOnInteraction?s(!0,!0):I())}),c("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){I();return}E=!0,C=!1,_=!1,M=setTimeout(()=>{_=!0,C=!0,s(!0)},200)}}),c("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!E)){if(clearTimeout(M),clearTimeout(n),e.params.autoplay.disableOnInteraction){C=!1,E=!1;return}C&&e.params.cssMode&&a(),C=!1,E=!1}}),c("slideChange",()=>{e.destroyed||!e.autoplay.running||(m=!0)}),Object.assign(e.autoplay,{start:A,stop:I,pause:s,resume:a})}const we="/assets/shareity-letras.c7abb907.png",Se={class:"flex flex-col md:flex-row w-full items-center justify-between"},Ee=t("img",{src:we,alt:"Letras",class:"h-11"},null,-1),Ce={class:"flex flex-row gap-5 text-sm md:text-base text-center"},ke={class:"font-bold hover:text-white hover:bg-sky-400 rounded-lg px-3 py-2"},Te={__name:"LayoutSpecial",setup(T){de();const e=u(!1);function L(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen(),e.value=!e.value}return setInterval(()=>{document.fullscreenElement||(e.value=!1)},1e3),(c,o)=>{const y=G("RouterLink");return v(),N("div",{class:Q(["min-h-screen items-center justify-center",r(ue),e.value?"":"pt-28 md:pt-14"])},[b(he,{class:Q([e.value?"-translate-y-32 md:-translate-y-16":"","transition-all"])},{default:d(()=>[t("div",Se,[b(y,{to:"dashboard"},{default:d(()=>[Ee]),_:1}),t("div",null,[t("ul",Ce,[t("li",{class:"font-bold hover:text-white hover:bg-sky-400 rounded-lg px-3 py-2"},[t("button",{type:"button",onClick:L},"GO FULL SCREEN")]),t("li",ke,[b(y,{to:"campaigns"},{default:d(()=>[le("CAMPAIGNS")]),_:1})])])])])]),_:1},8,["class"]),ce(c.$slots,"default")],2)}}};const K=T=>(ye("data-v-6196aace"),T=T(),_e(),T),Le={class:"flex flex-col md:flex-row items-center"},$e={class:"relative flex justify-center items-center gap-6"},Ie=["src"],De=["src"],Me={class:"flex flex-col mx-5 gap-3 flex-1"},Pe={class:"text-4xl font-extrabold"},Fe={class:"text-lg font-light"},Ne=["src"],Ve=K(()=>t("p",{class:"text-center text-gray-600 mb-6 text-4xl font-extrabold"}," LIVE FEED ",-1)),Oe={class:"overflow-y-auto grid grid-cols-1 md:grid-cols-2 items-center gap-6"},Ue={key:0},Re={class:"grid grid-cols-2 w-40 mx-auto mb-6"},qe=["src"],Ae={class:"flex w-full flex-col"},Be={class:"text-lg font-bold"},je={class:"flex w-full justify-between"},ze={class:"flex flex-col text-left"},He={class:"text-xs"},Ge=K(()=>t("b",null,"Points:",-1)),Ke={class:"text-blue-500"},We=["src"],Je={class:"rounded-md shadow-inner"},Qe=["src"],Xe=["src"],Ye={class:"relative w-[300px] h-full flex justify-center"},Ze={class:"absolute top-4 z-[100] right-[10%]"},et=["muted","onClick","poster","src"],tt=["poster","src"],at=K(()=>t("p",{class:"text-xl italic font-bold"},"New Challenge has been added",-1)),st="default/user_default.png",lt="default/play_button.png",ot="default/pause_button.png",nt={__name:"PresentationView",setup(T){const e="https://chgsdev.shareity.com/",L="http://appdev.shareity.com/",c=pe(),o=u({}),y=u([]),n=u(),h=u([]),$=u(!1),w=u(!0),i=u(!1),S=u(),g=u(null);var E=u(null);u([]);const C=u(null),M=u([]),m=u(!0),_=s=>{E=s},P=me(()=>`https://api.qrserver.com/v1/create-qr-code/?size=500x500&color=${o.value.color.replace("#","")}&data=${L}challenges/${c.query.id}`);fe(()=>{te.getChallenges(c.query.id).then(s=>{o.value=s,y.value=s.userChallenges,h.value=s.userChallenges.filter(a=>a.user.firstName!=="Unknown"),n.value=h.value[0],i.value=I(n.value.url),q()})}),ve(g,s=>{i.value&&k(0)});function R(){E.slideNext(),k(E.activeIndex)}async function V(s){var a;n.value=h.value[s.activeIndex],q(),i.value&&((a=g.value[s.previousIndex])==null||a.pause())}function q(){te.getUrlUserChallengeShared(n.value.id).then(s=>{let a=o.value.color.replace("#","");S.value=`https://api.qrserver.com/v1/create-qr-code/?size=500x500&color=${a}&data=${L}userChallenge/shares/${s.twilio.id}/${n.value.id}`,console.log("UrlShared",`${L}/userChallenge/shares/${s.twilio.id}/${n.value.id}`)})}function k(s){let a=g.value[s];a.paused?(a==null||a.play(),w.value=!1,a.muted=m.value,M[s]=m.value):(a==null||a.pause(),w.value=!0,a.muted=!M[s],m.value=a.muted)}function A(s){C.value=s,m.value=!m.value,M[s]=m.value}function I(s){const a=[".GIF",".MP4",".MOV"],D="."+s.split(".").pop();return!(a.indexOf(D.toUpperCase())<0)}return(s,a)=>{const D=G("v-btn"),B=G("v-snackbar");return v(),F(Te,null,{default:d(()=>[o.value.badge?(v(),F(ee,{key:0,class:"w-full"},{default:d(()=>[b(J,null,{default:d(()=>[t("div",Le,[t("div",$e,[t("img",{class:"w-24 rounded-md shadow-md mb-3 md:m-0",src:r(e)+o.value.badge},null,8,Ie),t("img",{class:"md:hidden w-20 rounded-md shadow-md mb-3 md:m-0",src:P.value},null,8,De)]),t("div",Me,[t("p",Pe,j(o.value.name),1),t("p",Fe,j(o.value.description),1)]),t("img",{class:"hidden md:block w-24 rounded-md shadow-md mb-3 md:m-0",src:P.value},null,8,Ne)])]),_:1})]),_:1})):X("",!0),b(ee,null,{default:d(()=>[b(J,null,{default:d(()=>[Ve,t("div",Oe,[n.value?(v(),N("div",Ue,[t("div",Re,[t("img",{class:"w-16 h-16 object-cover rounded-full",src:n.value.user.imagen?r(e)+n.value.user.imagen:r(e)+st},null,8,qe),t("div",Ae,[t("p",Be,j(`${n.value.user.firstName}`),1),t("div",je,[t("div",ze,[t("p",He,[Ge,t("span",Ke,j(` ${n.value.user.pointCount}`),1)])])])])]),t("img",{class:"block mx-auto w-40 rounded-md shadow-md",src:S.value},null,8,We)])):X("",!0),t("div",Je,[i.value?(v(),F(r(ae),{key:0,direction:"vertical",pagination:{clickable:!0},onSlideChange:V,onSwiper:_},{default:d(()=>[(v(!0),N(Z,null,Y(h.value,(p,O)=>(v(),F(r(se),{class:"rounded-md shadow-xl relative",key:p.id},{default:d(()=>[w.value?(v(),N("img",{key:0,class:"icon-video absolute z-10 pointer-events-none",src:r(e)+lt},null,8,Qe)):(v(),N("img",{key:1,class:"icon-video absolute dipel-effect z-10 pointer-events-none",src:r(e)+ot},null,8,Xe)),t("div",Ye,[t("div",Ze,[b(ge,{class:"mr-5 bg-transparent border-none",icon:m.value?r(re):r(ie),small:"",onClick:z=>A(O)},null,8,["icon","onClick"])]),t("video",{ref_for:!0,ref_key:"videoRef",ref:g,class:"h-full",muted:m.value,onClick:z=>k(O),poster:r(e)+p.photoUrl,src:r(e)+p.url,onEnded:R},null,40,et)])]),_:2},1024))),128))]),_:1})):(v(),F(r(ae),{key:1,direction:"vertical",pagination:{clickable:!0},onSlideChange:V,modules:[r(be)],autoplay:{delay:3e3,disableOnInteraction:!0}},{default:d(()=>[(v(!0),N(Z,null,Y(h.value,(p,O)=>(v(),F(r(se),{class:"rounded-md shadow-xl relative",key:p.id},{default:d(()=>[t("img",{ref_for:!0,ref_key:"videoRef",ref:g,class:"h-full",poster:r(e)+p.photoUrl,src:r(e)+p.url},null,8,tt)]),_:2},1024))),128))]),_:1},8,["modules"]))])])]),_:1})]),_:1}),b(B,{modelValue:$.value,"onUpdate:modelValue":a[1]||(a[1]=p=>$.value=p),timeout:3e3,color:"blue"},{actions:d(()=>[b(D,{color:"white",variant:"text",onClick:a[0]||(a[0]=p=>$.value=!1)},{default:d(()=>[le(" Close ")]),_:1})]),default:d(()=>[at]),_:1},8,["modelValue"])]),_:1})}}},ht=xe(nt,[["__scopeId","data-v-6196aace"]]);export{ht as default};
