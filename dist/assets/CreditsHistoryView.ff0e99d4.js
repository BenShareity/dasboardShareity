import{M as V}from"./ServerCall.bf212017.js";import{_ as M}from"./NavBar.1d7fa6fb.js";import{_ as $}from"./CardBox.b1a10a53.js";import{_ as B,U as f}from"./LayoutAuthenticated.ccaeb884.js";import{L as P}from"./LoadingSpinner.708020bb.js";import{_ as U}from"./BaseButton.060f3a5f.js";import{U as A}from"./utilityMethods.d9c941ff.js";import{a as s,j as D,Q as H,M as L,o,c as N,w as y,b as n,g as e,e as v,f as r,A as h,F as x,h as b,t as l}from"./index.8eef5a34.js";import"./alerts.ef7819ba.js";import"./session.f47d2680.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./BaseIcon.86eb869a.js";import"./LoginController.5d91ed5e.js";const j={class:"flex justify-between pb-5"},E={class:"flex gap-2 items-center"},F=e("p",{class:"lg:text-xl text-lg"},"Credit History",-1),S={class:"p-3 bg-gray-100/50 dark:bg-slate-800"},T={key:0,class:"flex align-center justify-center h-screen"},I={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Q={key:0,class:"table-auto w-full text-sm text-left text-gray-500 dark:text-gray-400"},q=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Date"),e("th",{scope:"col",class:"px-6 py-3"},"Amount"),e("th",{scope:"col",class:"px-6 py-3"},"Credits"),e("th",{scope:"col",class:"px-6 py-3"},"Transaction"),e("th",{scope:"col",class:"px-6 py-3"},"Type")])],-1),z={class:"px-6 py-4"},G={class:"px-6 py-4"},J={class:"px-6 py-4"},K={class:"px-6 py-4"},O={class:"px-6 py-4"},R={class:"text-center"},de={__name:"CreditsHistoryView",setup(W){const i=s([]);s(!1);const k=s([]),d=s(Boolean),_=s({}),w=s();s({field:"firstName",order:1});const p=s(10),m=s(1),g=s();s([]);const C=D(()=>{var u;const c=(m.value-1)*p.value;return(u=i.value.page)==null?void 0:u.slice(c,c+p.value)});return H(async()=>{_.value=await f.getMyProfile(),d.value=!0,w.value=_.value.rol;let c=_.value.id;try{const a=await f.getCreditHistory(c,1e3);i.value=a,g.value=Math.ceil(i.value.page.length/p.value),console.log(i.value),d.value=!1,console.log("nmro p\xE1g",g.value)}catch(a){console.error("Error al obtener el historial de cr\xE9dito:",a)}}),(c,a)=>{const u=L("v-pagination");return o(),N(B,null,{default:y(()=>[n(M,null,{default:y(()=>[e("div",j,[e("div",E,[n(U,{to:"/credits",icon:v(V),color:"info","rounded-full":"",small:""},null,8,["icon"]),F])]),n($,{class:"mb-6 m","has-table":""},{default:y(()=>[e("div",null,[e("div",S,[(o(!0),r(x,null,h(k.value,t=>(o(),r("span",{key:t.id,class:"inline-block px-2 py-1 rounded-sm mr-2 text-sm bg-gray-100 dark:bg-slate-700"},l(t.name),1))),128))]),d.value?(o(),r("div",T,[n(P)])):b("",!0),e("div",I,[d.value?b("",!0):(o(),r("table",Q,[q,e("tbody",null,[(o(!0),r(x,null,h(C.value,t=>(o(),r("tr",{key:t.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700"},[e("td",z,l(v(A).formatDate(t.createAt)),1),e("td",G,l(`$ ${t.type=="credit"?t.rate*t.credit:0}`),1),e("td",J,l(t.credit),1),e("td",K,l(t.type),1),e("td",O,l(t.paymentMethod),1)]))),128))])]))]),e("div",R,[n(u,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=t=>m.value=t),length:g.value,"total-visible":p.value},null,8,["modelValue","length","total-visible"])])])]),_:1})]),_:1})]),_:1})}}};export{de as default};
