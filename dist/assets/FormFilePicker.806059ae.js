import{g as F}from"./ServerCall.bf212017.js";import{_ as I}from"./BaseButton.060f3a5f.js";import{a as t,j as f,I as S,o as n,f as s,g as i,b as w,n as m,t as C,h as z,F as B}from"./index.8eef5a34.js";const j={class:"flex items-stretch justify-start relative"},N={class:"inline-flex"},U=["accept"],_={key:0,class:"px-4 py-2 bg-gray-100 dark:bg-slate-800 border-gray-200 dark:border-slate-700 border rounded-r"},A={class:"text-ellipsis line-clamp-1"},D=["src"],L=["src"],T={__name:"FormFilePicker",props:{modelValue:{type:[Object,File,Array],default:null},mediaClass:{type:String,default:""},label:{type:String,default:null},icon:{type:String,default:F},accept:{type:String,default:null},color:{type:String,default:"info"},isRoundIcon:Boolean},emits:["update:modelValue"],setup(e,{emit:b}){const c=e,R=b,v=t(null),l=t(c.modelValue),p=f(()=>{if(!l.value)return!1;if(l.value instanceof File){const a=l.value.name.split(".").pop();return a==="mp4"||a==="mov"}else if(l.value instanceof String||l.value instanceof URL){const a=l.value.split(".").pop();return a==="mp4"||a==="mov"}}),g=f(()=>!c.isRoundIcon&&l.value),V=f(()=>c.modelValue);S(V,a=>{l.value=a,a||(v.value.input.value=null)});const y=t(null),h=t(null),k=a=>{console.log("props.mode :>> ",l.value),console.log("event.target",a.target.files);const o=a.target.files||a.dataTransfer.files;l.value=o[0],R("update:modelValue",o[0]);const u=new FileReader;p.value?u.onload=function(r){const d=r.target.result,x=h.value;x.src=d}:u.onload=function(r){const d=y.value;d.src=r.target.result},u.readAsDataURL(o[0])};return(a,o)=>(n(),s(B,null,[i("div",j,[i("label",N,[w(I,{as:"a",class:m({"w-12 h-12":e.isRoundIcon,"rounded-r-none":g.value}),"icon-size":e.isRoundIcon?24:void 0,label:e.isRoundIcon?null:e.label,icon:e.icon,color:e.color,"rounded-full":e.isRoundIcon},null,8,["class","icon-size","label","icon","color","rounded-full"]),i("input",{ref_key:"root",ref:v,type:"file",class:"absolute top-0 left-0 w-full h-full opacity-0 outline-none cursor-pointer -z-1",accept:e.accept,onInput:k},null,40,U)]),g.value?(n(),s("div",_,[i("span",A,C(l.value.name),1)])):z("",!0)]),p.value?(n(),s("video",{key:1,ref_key:"videoRef",ref:h,src:e.modelValue,class:m(l.value?e.mediaClass:""),autoplay:"",controls:""},null,10,L)):(n(),s("img",{key:0,ref_key:"imagenRef",ref:y,src:e.modelValue,class:m(l.value?e.mediaClass:"")},null,10,D))],64))}};export{T as _};
